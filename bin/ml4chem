#!/usr/bin/env python3
import time
import click
import os
import sys
path = os.path.dirname(os.path.abspath(__file__)).strip('bin')
sys.path.append(path)
from ml4chem.data.visualization import read_log, plot_latent_space

@click.command()
@click.option('--plot', default=None, help='Plot information from file.')
@click.option('--file', default=None, help='Path to log file or database.')
@click.option('--refresh', default=None, type=float,
              help='Useful for sleeping before reading log files.')

def main(**args):
    """ML4Chem command line tool"""
    training = ['rmse', 'loss']
    latent = ['latent']

    _file = args['file']
    metric = args['plot']
    refresh = args['refresh']

    if args['plot'] is not None:
        if args['plot'] in training:
            plt = read_log(_file, metric=metric,
                           refresh=refresh)
        elif args['plot'] in latent:
            plt = plot_latent_space(_file)

if __name__ == '__main__':
    main()
